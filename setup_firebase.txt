Інструкція по завантаженю фотографій на Firebase проект
-------------------------------------------------------
По посиланню створюємо проект: https://console.firebase.google.com/
easy-shop-firebase (як приклад)
далі йдемо в service accounts та отримуємо Generate New Private Key

1) Потріьно отримати service account file:
Як отримати файл служби облікових даних (service account file) для Firebase
Перейдіть до Firebase Console:
Відкрийте Firebase Console.

Виберіть ваш проект:
Виберіть проект, для якого ви хочете отримати облікові дані.

Перейдіть до налаштувань проекту:
Натисніть на "шестерню" (⚙️) біля назви вашого проекту в лівому верхньому куті, потім виберіть "Project settings" (Налаштування проекту).

Перейдіть до вкладки "Service accounts" (Службові облікові записи):
В меню виберіть "Service accounts".

Створіть новий ключ:
Натисніть на кнопку "Generate new private key" (Створити новий приватний ключ). Після цього, файл .json буде завантажено на ваш комп'ютер.

Збережіть файл безпеки:
Зберігайте цей файл у безпечному місці, так як він містить секретну інформацію, яка дозволяє доступ до вашого проекту Firebase.
Поки поклав файл "apartment-rent-yd-firebase-adminsdk-y9fjl-b85fd05347.json" у корінь проекту сервера!!!

2) Створюємо Storage для зберігання файлів
На Firebase у проекті переходимо в Storage і обираємо Start in production mode, далі. 
Коли Storage створено шукаємо розділ Rules та міняємо їх на наступне та зберігаємо:
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}
Далі переходимо у Files створюємо папку, як приклад apartment і в ній папку images, отримуємо посилання:
gs://apartment-rent-yd.appspot.com/apartment/images

Далі нам потрібна буде частина цього посилання, а саме "apartment-rent-yd.appspot.com"

3) Підключаємо все у проект сервера:
Встановлюємо firebase-admin
npm install firebase-admin
________________________________

Імпортуйте та ініціалізуємо Firebase Admin SDK з використанням файлу apartment-rent-yd-firebase-adminsdk-y9fjl-b85fd05347.json:
Створюємо файл firebaseConfig.js та прописуємо:

const admin = require('firebase-admin');
const serviceAccount = require('./path/to/your-service-account-file.json'); //шлях до файлу apartment-rent-yd-firebase-adminsdk-y9fjl-b85fd05347.json
admin.initializeApp({
  credential: admin.credential.cert(serviceAccount), //використовуємо ту частину з посилання на папки в Firebase Storage
  storageBucket: 'your-bucket-name.appspot.com' 
});
const bucket = admin.storage().bucket();

Далі в контролері:
const fs = require("fs");
const { bucket } = require("../firebaseConfig");

const createApartment = async (req, res, next) => {
  const { mainImage } = req.body;

  const files = req.files || [];
  const mainImageFile = files.find((file) => file.originalname === mainImage);

  try {
    let mainImageUrl = "";
    if (mainImageFile) {
      const mainImageStorageFile = bucket.file(
        `apartment/images/${Date.now()}_${mainImageFile.originalname}`
      );
      await mainImageStorageFile.save(fs.readFileSync(mainImageFile.path));
      mainImageUrl = await mainImageStorageFile.getSignedUrl({
        action: "read",
        expires: "03-01-2500",
      });
      mainImageUrl = mainImageUrl[0];
      console.log(mainImageUrl); //Тут наше посилання на файл!!!
    }
  } catch (error) {
    console.log(error);
  }
};

Ще не маловажно в .env переносимо 
PRIVATE_KEY_ID=6be11409ea8314ca2fd22ad5f019c55abe34a462
PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nMIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQDnSdkBs34Dvzb8\nsqFQDLQzlebeVDrvX9GfJZLQ6eSqiMgV78yaVAYz0sCJHQdoDg2l5xbJxRH8D7k9\n1uwVu5e0G17qVgJL1PN9U5AIyBY6dI2+X20JYDjq1/P/70iK+1eBa0YHDZGBkv7v\nOuOd0vTc1OzHqXop94VA972lXAX+j48TwO4k9003KXYB0lKzXZOsIDxos65gFqIQ\n4eg8+GgP9QLBvHEfuouMg83SRFeKqeLUNeuSB45k2Mf9OCJsyd8jyqKuy7rhv6tf\niH89LMedcYoMip1BZ7jiPKqf7GtZgj36WOPYU9zB4rRUXWiBdc6FV1tTfnkJ2hyw\njc/zvMA1AgMBAAECggEAaYONFnOWR4tSQJIVeXlyNB5sxnzSriWeceYoRlqN0Sa5\ncRiG1NkEQ1wgLe0qVdQjcc4s3TukasOZlJaZ+YgtOyNJd8ppHcM2mbQnf3oYee52\nQ6UxDxfwn2KJk/bLt2vWjdoshkcwXFZ9KxJIiNWWk7AnnSa57q9XAT6ELA4BRhHG\nBTR/UErj68ALl+4xiV4Ok6nv6+Frsj9/GQ355K67tkzbNJxvgSYtavhzfsprA2Mz\nHk3Be3Yzqjm6HeURdAeTDEgTar8o2YNDqsVdDyyuNun/2wOlgyDMkRxJRagdWriw\n5P/9RTD1hNu4sH9aM+OHMmae85eiv+ZcXIRYt9STeQKBgQDz2u/7ah0GIkF6wX/J\nGYAfRRdBo51eH9oueGg4Wxk/xt6nln00IBVgxlnMCD5oLe4XhZa4uCW8i16g70rT\nCwQCsioBk7OajNx6I4/reui2eBHddFtm3yp3bR8slzE5kPKg3bE/e8i5OSNkkTXQ\nN/DJgHO/7Nee1zVDINYx/OUbtwKBgQDyzrBWgobyNIlAjk+dHCv9a877KlFqRDdN\ndClP0rpaQ6MB0NkJMwoqMvoNpWTO/3PUv0dvdnmNwd383KYGVbmtE+BNYA0eUn0v\ntbhcPD+rzepCZPN1jQO8XRTo006LpdBvSdKfig878E7bNVw2suz1WbXSFDUffTad\nXCGKgkMbcwKBgQDola3HMpK0QwAJQX3MJRJawN9Jr/Bs0hybriRZfCo89kVvus14\nZhF92DHVtRcw7n3k2XnEfX8gsh1zikjnud39ZElEb8giZK/1nu2qP/St9R+1BUIY\ngEpU1jOhqCM/MMz6OfjRABOW9rSXOxkEnBaBWo8MQ630xnb6q9sgmoE7SQKBgQCm\nSlASr4pkTv7BK7Xyz9yAz1kOQ0lHEjkd3rR8asIeF7yH/dTmrAIGLKt8tQ15hxJ5\nXhc6i1VsdJ3oE+XQ6N0lYDt6QpI5dh0uk7IT2V9x9rC9kA39L/qjAszTOATPN1yt\nG04Y3aDZWBdpof3pqFkJH8uaeSR40HSbCQIfrl7vaQKBgQDXM+CwEG+XGt8lE1s5\nM+vUC46URnaoV3w+sbTjH2W6h/wEzx/fS2cs000zAGDuEhB1o75E8vNG1uRuQK6R\nkwjgZFNzcub7NDGKtafWCBaMdVsc/5AwSvfBc5b32NbuePcllx9RssQBivmLdlNX\nEZESuPHR9R37PibSyjbCkYtjdQ==\n-----END PRIVATE KEY-----\n

тоді в firebaseConfig.js:
